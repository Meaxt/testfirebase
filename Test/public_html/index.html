<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <script src="radiant-heat-57.firebaseapp.com"></script>
        <script src="https://cdn.firebase.com/js/client/2.2.4/firebase.js"></script>
        <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
        <!--<script src="testjs.js"></script>-->
    </head>
    <body>
        <div id="Info"></div>
        <div id="skriv">
            
            <button id='login'>Logga in</button>
        </div>
        <script>
            var ref = new Firebase('https://radiant-heat-57.firebaseio.com/');
            $('#login').click(function(){
                           ref.authWithOAuthPopup("facebook", function(error, authData) {
                if (error) {
                    console.log("Login Failed!", error);
                } else {
                    
                    console.log("Authenticated successfully with payload:", authData);
                    username = authData.facebook.displayName;
                    window.location = "http://localhost/testfirebase/Test/public_html/test.html";
//                    $('#info').append('You logged in as '+ username);

                }
            });
                        ref.onAuth(function(authData) {
                if (authData) {
//                    console.log("new user");
                    ref.child("users").child(authData.uid).set({
                        provider: authData.provider,
                        name: authData.facebook.displayName
                    });
                }
            });
            });
            
            
            
        </script>
    </body>
</html>
